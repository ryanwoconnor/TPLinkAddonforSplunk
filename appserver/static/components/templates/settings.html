<div id="tplinkSettings">
    <h1>TPLink Add-On Configuration</h1>

    <% if (failed) { %>
        <div id="error-message">
            <p><%- error %></p>
        </div>
    <% } else if (!failed && _method=="post") { %>
        <div id="success-message">
            <p>Successfully added a new Device.</p>
        </div>
    <% } else if (!failed && _method=="delete") { %>
        <div id="success-message">
            <p>Successfully deleted the Device.</p>
        </div>
    <% } %>

    <div id="newAPIFormWrapper">
        <h2>Add New IP Address</h2>
	<p>Here you can enter the name of your device, as well as an IP Address for the device you want to query. </p>
	<form id="tplinkKeyForm" class="form-line">
            <div class="inlineFormComponent">
                <input type="text" class="form-control mb-2 mr-sm-2 mb-sm-0"
                       id="apiKeyName" name="apiKeyName" placeholder="Name for Device">
                <span class="help-block">Provide a useful name such as 'Home TPLink'.</span>
            </div>
            <div class="inlineFormComponent">
            <input type="text" class="form-control mb-2 mr-sm-2 mb-sm-0"
                   id="apiKeyValue" name="apiKeyValue" placeholder="IP Address">
            </div>
            <button type="submit" id="addKey" class="btn btn-primary">Add Device</button>
        </form>
    </div>
    <div id="keyListing">
        <h2>Current Devices</h2>
        <% if(loaded) { %>
        <table class="table table-chrome table-striped wrapped-results">
            <thead class="shared-resultstable-resultstableheader">
                <tr>
                    <th>Device Name</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <% if(!_.isEmpty(keys)) { %>
                    <% for (var key in keys) { %>
                        <% if (keys.hasOwnProperty(key)) { %>
                        <tr>
                            <td>
                                <%- key %>
                            </td>
                            <td>
                                <a class="deleteKey" href="#" data-delete="<%- key %>">Delete</a>
                            </td>
                        </tr>
                        <% } %>
                    <% } %>
                <% } else { %>
                    <tr>
                        <td>It looks like you don't have any TP-Link devices added. Add one!</td>
                        <td></td>
                    </tr>
                <% } %>
            </tbody>
        </table>
        <% } else { %>
         <p>Loading...</p>
        <% } %>
    </div>
</div>
